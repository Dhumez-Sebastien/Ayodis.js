/**
 * @license
 * ayodis.js - v0.0.1
 * Copyright (c) 2014-2015, Dhumez SÃ©bastien
 * https://plus.google.com/117777107050959596079
 *
 * Compiled: 2014-05-29
 *
 * ayodis.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license.php
 */
var Ayodis=function(){function a(){}return a.__checkArgs=function(){for(var a=arguments,b=0,c=a.length;c>b;b++)if(_.isUndefined(a[b]))return!1;return!0},a.__checkHash=function(a){return _.isString(a)},a.__checkField=function(a){return _.isString(a)},a.__checkValue=function(a){return _.isString(a)||_.isNumber(a)},a.__sendCallback=function(a,b,c){return!_.isUndefined(c)&&_.isFunction(c)&&c(a,b),a&&console.error(a),b},a.exists=function(a){return this._key[a]?void 0:0},a.hdel=function(a,b,c){var d=0;return this._hash[a]&&this._hash[a][b]&&(d=1,delete this._hash[a][b]),c&&c(null,d),d},a.hgetall=function(a,b){var c=[];for(var d in this._hash[a])c.push(d),c.push(this._hash[a][d]);return b&&b(null,c),c},a.hkeys=function(a,b){var c=[];for(var d in this._hash[a])c.push(d);return b&&b(null,c),c},a.__msg={ERR_ARGS:"ERR wrong number of arguments for",FIELD_MUST_BE_STRING:"Field must be a String",HASH_MUST_BE_STRING:"Hash must be a String",VALUE_MUST_BE_STRING_OR_NUMBER:"Value must be a String or Number",OK:"OK"},a._hash={},a._key={},a}();Ayodis.hexists=function(a,b,c){var a=arguments[0],b=arguments[1],c=arguments[2];return this.__sendCallback(null,this._hash[a]&&this._hash[a][b]?1:0,c)},Ayodis.hget=function(a,b,c){return this.__sendCallback(null,this._hash[a]&&this._hash[a][b]?this._hash[a][b]:null,c)},Ayodis.hlen=function(a,b){var c=0;for(var d in this._hash[a])this._hash[a].hasOwnProperty(d)&&c++;return this.__sendCallback(null,c,b)},Ayodis.hmget=function(){var a,b=arguments,c=b[0]||null,d=[],e=b.length;b[b.length-1]&&_.isFunction(b[b.length-1])&&(a=b[b.length-1],e--);for(var f=1,g=e;g>f;f++)d.push(this._hash[c]&&this._hash[c][b[f]]?this._hash[c][b[f]]:null);return this.__sendCallback(null,d,a)},Ayodis.hmset=function(a){var b,c=arguments,d=c.length;_.isFunction(c[c.length-1])&&(b=c[c.length-1],d--);for(var e=1,f=d,g=!0;f>e;e++)if(g&&this.__checkField(c[e]))g=!1;else{if(g&&!this.__checkField(c[e]))return this.__sendCallback(this.__msg.ERR_ARGS+" HMSET :: "+a,null,b);if(!g){if(g&&!this.__checkValue(c[e]))return this.__sendCallback(this.__msg.VALUE_MUST_BE_STRING_OR_NUMBER+" :: Hash : "+a+" :: Field : "+g,null,b);g=!0}}if(!g)return this.__sendCallback(this.__msg.ERR_ARGS+" HMSET :: "+a,null,b);for(var h,e=1,f=d,g=!0;f>e;e++)g?(h=c[e],g=!1):(this._hash[a]||(this._hash[a]={}),g||(this._hash[a][h]=c[e],g=!0));return this.__sendCallback(null,"OK",b)},Ayodis.hset=function(a,b,c,d){if(!this.__checkValue(c))return this.__sendCallback(this.__msg.VALUE_MUST_BE_STRING_OR_NUMBER+" :: Hash : "+a+" :: Field : "+b,null,d);var e=this._hash[a]&&this._hash[a][b]?0:1;return this._hash[a]||(this._hash[a]={}),this._hash[a][b]=c,this.__sendCallback(null,e,d)},Ayodis.hsetnx=function(a,b,c,d){if(!this.__checkValue(c))return this.__sendCallback(this.__msg.VALUE_MUST_BE_STRING_OR_NUMBER+" :: Hash : "+a+" :: Field : "+b,null,d);var e=this._hash[a]&&this._hash[a][b]?0:1;return this._hash[a]||(this._hash[a]={}),1===e&&(this._hash[a][b]=c),this.__sendCallback(null,e,d)},Ayodis.__overLoadCheckArgs=function(){var a=[{check:["args","hash"],method:"hexists",limit:2,old:Ayodis.hexists},{check:["args"],method:"hget",limit:2,old:Ayodis.hget},{check:["args"],method:"hlen",limit:1,old:Ayodis.hlen},{check:["args"],method:"hmget",limit:1,old:Ayodis.hmget},{check:["args"],method:"hmset",limit:1,old:Ayodis.hmset},{check:["args"],method:"hset",limit:3,old:Ayodis.hset},{check:["args"],method:"hsetnx",limit:3,old:Ayodis.hsetnx}];return _.each(a,function(a){for(var b=0;b<a.check.length;b++)Ayodis[a.method]=function(){console.log("Check Args ("+a.limit+") in method :: "+a.method.toUpperCase());for(var b=0;b<a.limit;b++)if(!this.__checkArgs(arguments[b]))return this.__sendCallback(this.__msg.ERR_ARGS+" "+a.method.toUpperCase(),null,arguments[arguments.length-1]);return a.old.apply(this,arguments)}}),this},Ayodis.__overLoadCheckHashField=function(){var a=[{method:"hexists",old:Ayodis.hexists},{method:"hget",old:Ayodis.hget},{method:"hset",old:Ayodis.hset},{method:"hsetnx",old:Ayodis.hsetnx}];return _.each(a,function(a){Ayodis[a.method]=function(){return console.log("Check Field ("+a.limit+") in method :: "+a.method.toUpperCase()),this.__checkField(arguments[1])?a.old.apply(this,arguments):this.__sendCallback(this.__msg.FIELD_MUST_BE_STRING+" :: "+arguments[1],null,arguments[2])}}),this},Ayodis.__overLoadCheckHash=function(){var a=[{method:"hexists",old:Ayodis.hexists},{method:"hget",old:Ayodis.hget},{method:"hlen",old:Ayodis.hlen},{method:"hmset",old:Ayodis.hmset},{method:"hset",old:Ayodis.hset},{method:"hsetnx",old:Ayodis.hsetnx}];return _.each(a,function(a){Ayodis[a.method]=function(){return console.log("Check Hash ("+a.limit+") in method :: "+a.method.toUpperCase()),this.__checkHash(arguments[0])?a.old.apply(this,arguments):this.__sendCallback(this.__msg.HASH_MUST_BE_STRING+" "+a.method.toUpperCase(),null,arguments[arguments.length-1])}}),this},Ayodis.__overLoadCheckHashField().__overLoadCheckHash().__overLoadCheckArgs();